---
layout: post
title: 100DaysOfHomelab 13-14/100 Docker Compose and Networking
category: 100DaysOfHomelab
tags: homelab virtualization docker container docker-compose docker-networking networking layer3 ipvlan
---
So I didn't post anything yesterday. There was really nothing to talk about beyond: I made a bunch of tiny edits in my docker-compose.yml file, pushed them to GitHub one by one, and pulled them down to my test machine. I would literally make an edit in Sublime on my macbook, commit/push the change, and then on my VM, I would hit up-arrow twice and enter to send ```git pull```, followed by another two up-arrows and enter to send ```sudo docker-compose up -d``` over and over again.

I had circular references for links. I removed all the links, because I got to looking at the docker documentation, and they are no longer recommended. You get almost all of the functionality by using user-defined networking. Awesome!

Except...user-defined networking in docker-compose is a little nightmarish unless you want to use the default "bridge" network with a custom name. What I'm trying to do is use ipvlan L3, as that honestly seems like the best fit for my use case here. I want to be able to set up specific subnets for classes of containers...like using 10.1.1.0/24 for general-purpose things, like Heimdall and Yacht. I'd like to use 10.1.2.0/24 specifically for logging and security related containers. It goes on from there. Setting up the static route in my router really isn't the problem, it's not a great router, but it does have the functionality. The issue here (I can create the network manually using ```docker network```) is that I can't get docker-compose to like it. I get the error that ```ipvlan``` is not a valid driver. I've been digging through the documentation for docker compose, and, well...have you ever read Microsoft documentation from the 90s? I think Docker hired the same people. Their documentation is technically correct, but almost completely worthless if you're looking for a specific thing. Terrible application of technical writing. Still, it _does_ have the information in there, it's just hard to find. I'll keep digging for it. Apparently this isn't a terribly common use-case, as some basic Googling led me to completely irrelevant YouTube videos and the Docker docs. So, it's going to be a lot of Google-Fu to find the information that I need.

I'm also thinking about taking tomorrow "off" of homelabbing, and just play some video games. I've completed all of my assignments for my class in school, and I start my new position on Monday...a little bit of celebration seems in order. Not sure if I'll keep these classes for next semester (I'm registered, but next week is a "break" week, and then I have the first week of class for drop/add) or not, it's really going to depend on the onboarding process. That said, I don't actually need this degree at this point in my career...I'm just getting started, and a Master's is just as likely to hurt as to help my prospects.